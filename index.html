<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Modelstore by steinarb</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Modelstore</h1>
        <p>Java library holding a generic model intended as the underyling model of an Eclipse GEF editor.</p>

        <p class="view"><a href="https://github.com/steinarb/modelstore">View the Project on GitHub <small>steinarb/modelstore</small></a></p>


        <ul>
          <li><a href="https://github.com/steinarb/modelstore/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/steinarb/modelstore/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/steinarb/modelstore">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <div id="table-of-contents">
<h2>
<a id="table-of-contents" class="anchor" href="#table-of-contents" aria-hidden="true"><span class="octicon octicon-link"></span></a>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. What is this?</a></li>
<li><a href="#sec-2">2. Development stuff</a></li>
<li>
<a href="#sec-3">3. Roadmap <code>[1/19]</code></a>
<ul>
<li><a href="#sec-3-1">3.1. DONE Fix the test coverage of all property values (hashCode, equals and toString ruined coverage)</a></li>
<li><a href="#sec-3-2">3.2. TODO Put javadoc from travis builds on the web</a></li>
<li><a href="#sec-3-3">3.3. TODO Add javadocs to everything</a></li>
<li><a href="#sec-3-4">3.4. TODO Refactor the propertyvalue creation into something that makes sense for a library bundle</a></li>
<li><a href="#sec-3-5">3.5. TODO Add clone operation to Propertyset</a></li>
<li><a href="#sec-3-6">3.6. TODO Add lazy copy-on-read for complex properties (possibly just do shallow copy-on-read?)</a></li>
<li><a href="#sec-3-7">3.7. TODO Add shallow copy-on-read for list properties</a></li>
<li><a href="#sec-3-8">3.8. TODO Put some basic aspects in place (object, relationship, model, aspectcontainer)</a></li>
<li><a href="#sec-3-9">3.9. TODO Add AspectViwer (connected to aspect container and used as a filter)</a></li>
<li><a href="#sec-3-10">3.10. TODO Test serialization/deserialization using YAML (YAML has object id and object reference)</a></li>
<li>
<a href="#sec-3-11">3.11. TODO Split off ModelContext/PropertyContext</a>
<ul>
<li><a href="#sec-3-11-1">3.11.1. TODO Persist and instantiation should use with ModelContext/PropertyContext</a></li>
<li><a href="#sec-3-11-2">3.11.2. TODO Store metadata (last modification time, at first)</a></li>
<li><a href="#sec-3-11-3">3.11.3. TODO Create a clone operation (shallow collection copy, propertyvalues are immutable)</a></li>
<li><a href="#sec-3-11-4">3.11.4. TODO Create a merge operation that will merge all aspects and propertysets</a></li>
<li><a href="#sec-3-11-5">3.11.5. TODO Move ModelContext/PropertyContext to a library bundle (or possibly one with a factory service for modelcontexts?)</a></li>
<li><a href="#sec-3-11-6">3.11.6. TODO Move Jackson serialization to a separate bundle (maybe a library bundle?)</a></li>
</ul>
</li>
<li>
<a href="#sec-3-12">3.12. TODO Storage based on SQL for relationships and references and individual JSON files</a>
<ul>
<li><a href="#sec-3-12-1">3.12.1. TODO Individual Propertyset files git versioned</a></li>
<li><a href="#sec-3-12-2">3.12.2. TODO Metatada into the RDBMS</a></li>
</ul>
</li>
<li><a href="#sec-3-13">3.13. TODO Storage based on PostgreSQL with native JSON support</a></li>
<li><a href="#sec-3-14">3.14. TODO Connect a minimal hardcoded model to eclipse GEF</a></li>
<li><a href="#sec-3-15">3.15. TODO Implement JSON storage for eclipse GEF models</a></li>
<li><a href="#sec-3-16">3.16. TODO Get PropertysetManager with storage running in Karaf</a></li>
<li><a href="#sec-3-17">3.17. TODO Create a RESTful API and a storage/persist mechanism on top of it</a></li>
<li><a href="#sec-3-18">3.18. TODO Create a query language (or find something usable and implement/use)</a></li>
<li><a href="#sec-3-19">3.19. TODO Lag en s-expression-factory for jackson</a></li>
</ul>
</li>
</ul>
</div>

<p></p>
</div>

<h1>
<a id="what-is-this" class="anchor" href="#what-is-this" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is this?<a id="sec-1"></a>
</h1>

<p>This is a small Java library intended to hold a model consisting of objects and relations in memory.</p>

<p>The main use case for this library is to be used as a generic model container for an Eclipse GEF editor.  Because of this, and because it does no harm, and because I kind of like OSGi, this library is packaged as an OSGi bundle.</p>

<p>The API is meant to be as clutter-free as possbile in use: it should throw no exceptions, and it should return no nulls (instead of null it will return the empty string, empty collections and zero values for the numeric types).</p>

<p>The PropertySet interface defines the API of objects that forms both objects and relationships of the model.</p>

<p>This library is licensed under the Eclipse Public License.  See the
file LICENSE for the terms and specifics of the license.</p>

<h1>
<a id="development-stuff" class="anchor" href="#development-stuff" aria-hidden="true"><span class="octicon octicon-link"></span></a>Development stuff<a id="sec-2"></a>
</h1>

<p><a href="https://travis-ci.org/steinarb/modelstore"></a><a href="https://travis-ci.org/steinarb/modelstore.png?branch=master">https://travis-ci.org/steinarb/modelstore.png?branch=master</a> <a href="https://coveralls.io/r/steinarb/modelstore?branch=master"></a><a href="https://coveralls.io/repos/steinarb/modelstore/badge.svg?branch=master">https://coveralls.io/repos/steinarb/modelstore/badge.svg?branch=master</a></p>

<ul>
<li>  <a href="https://github.com/steinarb/modelstore">Source code repository</a>
</li>
<li>  <a href="https://travis-ci.org/steinarb/modelstore">Continous integration build on Travis CI</a>
</li>
<li>  <a href="https://coveralls.io/r/steinarb/modelstore">Test coverage history on coveralls</a>
</li>
</ul>

<h1>
<a id="roadmap-119" class="anchor" href="#roadmap-119" aria-hidden="true"><span class="octicon octicon-link"></span></a>Roadmap <code>[1/19]</code><a id="sec-3"></a>
</h1>

<h2>
<a id="done-fix-the-test-coverage-of-all-property-values-hashcode-equals-and-tostring-ruined-coverage" class="anchor" href="#done-fix-the-test-coverage-of-all-property-values-hashcode-equals-and-tostring-ruined-coverage" aria-hidden="true"><span class="octicon octicon-link"></span></a>DONE Fix the test coverage of all property values (hashCode, equals and toString ruined coverage)<a id="sec-3-1"></a>
</h2>

<h2>
<a id="todo-put-javadoc-from-travis-builds-on-the-web" class="anchor" href="#todo-put-javadoc-from-travis-builds-on-the-web" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Put javadoc from travis builds on the web<a id="sec-3-2"></a>
</h2>

<ul>
<li>  Could be my own server</li>
<li>  Could be <a href="http://benlimmer.com/2013/12/26/automatically-publish-javadoc-to-gh-pages-with-travis-ci/">a github web site</a>
</li>
</ul>

<h2>
<a id="todo-add-javadocs-to-everything" class="anchor" href="#todo-add-javadocs-to-everything" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Add javadocs to everything<a id="sec-3-3"></a>
</h2>

<h2>
<a id="todo-refactor-the-propertyvalue-creation-into-something-that-makes-sense-for-a-library-bundle" class="anchor" href="#todo-refactor-the-propertyvalue-creation-into-something-that-makes-sense-for-a-library-bundle" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Refactor the propertyvalue creation into something that makes sense for a library bundle<a id="sec-3-4"></a>
</h2>

<ul>
<li>  Maybe a static method on the PropertyValue interface, if that's possible?</li>
</ul>

<h2>
<a id="todo-add-clone-operation-to-propertyset" class="anchor" href="#todo-add-clone-operation-to-propertyset" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Add clone operation to Propertyset<a id="sec-3-5"></a>
</h2>

<h2>
<a id="todo-add-lazy-copy-on-read-for-complex-properties-possibly-just-do-shallow-copy-on-read" class="anchor" href="#todo-add-lazy-copy-on-read-for-complex-properties-possibly-just-do-shallow-copy-on-read" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Add lazy copy-on-read for complex properties (possibly just do shallow copy-on-read?)<a id="sec-3-6"></a>
</h2>

<ul>
<li>  Can it be possible to skip this for serialization?

<ul>
<li>  Or is the cost of shallow copies so low compared to the serialization that it doesn't really matter?</li>
</ul>
</li>
</ul>

<h2>
<a id="todo-add-shallow-copy-on-read-for-list-properties" class="anchor" href="#todo-add-shallow-copy-on-read-for-list-properties" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Add shallow copy-on-read for list properties<a id="sec-3-7"></a>
</h2>

<h2>
<a id="todo-put-some-basic-aspects-in-place-object-relationship-model-aspectcontainer" class="anchor" href="#todo-put-some-basic-aspects-in-place-object-relationship-model-aspectcontainer" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Put some basic aspects in place (object, relationship, model, aspectcontainer)<a id="sec-3-8"></a>
</h2>

<h2>
<a id="todo-add-aspectviwer-connected-to-aspect-container-and-used-as-a-filter" class="anchor" href="#todo-add-aspectviwer-connected-to-aspect-container-and-used-as-a-filter" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Add AspectViwer (connected to aspect container and used as a filter)<a id="sec-3-9"></a>
</h2>

<h2>
<a id="todo-test-serializationdeserialization-using-yaml-yaml-has-object-id-and-object-reference" class="anchor" href="#todo-test-serializationdeserialization-using-yaml-yaml-has-object-id-and-object-reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Test serialization/deserialization using YAML (YAML has object id and object reference)<a id="sec-3-10"></a>
</h2>

<h2>
<a id="todo-split-off-modelcontextpropertycontext" class="anchor" href="#todo-split-off-modelcontextpropertycontext" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Split off ModelContext/PropertyContext<a id="sec-3-11"></a>
</h2>

<ul>
<li>  PropertysetManager will be the access point for creating and saving ModelContext instances</li>
<li>  This is an approach at making the system multithreaded and performant

<ul>
<li>  Minimal locking on the propertysets themselves, because there is only on thread using them at a time</li>
<li>  No need to copy the property values, because they are immutable (except for complexproperty and listproperty, that is…)

<ul>
<li>  Use shallow copy on list and complex object property get, perhaps?</li>
</ul>
</li>
</ul>
</li>
</ul>

<h3>
<a id="todo-persist-and-instantiation-should-use-with-modelcontextpropertycontext" class="anchor" href="#todo-persist-and-instantiation-should-use-with-modelcontextpropertycontext" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Persist and instantiation should use with ModelContext/PropertyContext<a id="sec-3-11-1"></a>
</h3>

<h3>
<a id="todo-store-metadata-last-modification-time-at-first" class="anchor" href="#todo-store-metadata-last-modification-time-at-first" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Store metadata (last modification time, at first)<a id="sec-3-11-2"></a>
</h3>

<h3>
<a id="todo-create-a-clone-operation-shallow-collection-copy-propertyvalues-are-immutable" class="anchor" href="#todo-create-a-clone-operation-shallow-collection-copy-propertyvalues-are-immutable" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Create a clone operation (shallow collection copy, propertyvalues are immutable)<a id="sec-3-11-3"></a>
</h3>

<h3>
<a id="todo-create-a-merge-operation-that-will-merge-all-aspects-and-propertysets" class="anchor" href="#todo-create-a-merge-operation-that-will-merge-all-aspects-and-propertysets" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Create a merge operation that will merge all aspects and propertysets<a id="sec-3-11-4"></a>
</h3>

<h3>
<a id="todo-move-modelcontextpropertycontext-to-a-library-bundle-or-possibly-one-with-a-factory-service-for-modelcontexts" class="anchor" href="#todo-move-modelcontextpropertycontext-to-a-library-bundle-or-possibly-one-with-a-factory-service-for-modelcontexts" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Move ModelContext/PropertyContext to a library bundle (or possibly one with a factory service for modelcontexts?)<a id="sec-3-11-5"></a>
</h3>

<ul>
<li>  Alternatively:

<ul>
<li>  Just move the interface definitions to a separate bundle

<ul>
<li>  Does this have any benefits</li>
</ul>
</li>
</ul>
</li>
</ul>

<h3>
<a id="todo-move-jackson-serialization-to-a-separate-bundle-maybe-a-library-bundle" class="anchor" href="#todo-move-jackson-serialization-to-a-separate-bundle-maybe-a-library-bundle" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Move Jackson serialization to a separate bundle (maybe a library bundle?)<a id="sec-3-11-6"></a>
</h3>

<h2>
<a id="todo-storage-based-on-sql-for-relationships-and-references-and-individual-json-files" class="anchor" href="#todo-storage-based-on-sql-for-relationships-and-references-and-individual-json-files" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Storage based on SQL for relationships and references and individual JSON files<a id="sec-3-12"></a>
</h2>

<h3>
<a id="todo-individual-propertyset-files-git-versioned" class="anchor" href="#todo-individual-propertyset-files-git-versioned" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Individual Propertyset files git versioned<a id="sec-3-12-1"></a>
</h3>

<h3>
<a id="todo-metatada-into-the-rdbms" class="anchor" href="#todo-metatada-into-the-rdbms" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Metatada into the RDBMS<a id="sec-3-12-2"></a>
</h3>

<ul>
<li>  Per propertyset load time</li>
<li>  Per propertyset last modified time</li>
<li>  Propertyset delete time</li>
</ul>

<h2>
<a id="todo-storage-based-on-postgresql-with-native-json-support" class="anchor" href="#todo-storage-based-on-postgresql-with-native-json-support" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Storage based on PostgreSQL with native JSON support<a id="sec-3-13"></a>
</h2>

<h2>
<a id="todo-connect-a-minimal-hardcoded-model-to-eclipse-gef" class="anchor" href="#todo-connect-a-minimal-hardcoded-model-to-eclipse-gef" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Connect a minimal hardcoded model to eclipse GEF<a id="sec-3-14"></a>
</h2>

<h2>
<a id="todo-implement-json-storage-for-eclipse-gef-models" class="anchor" href="#todo-implement-json-storage-for-eclipse-gef-models" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Implement JSON storage for eclipse GEF models<a id="sec-3-15"></a>
</h2>

<h2>
<a id="todo-get-propertysetmanager-with-storage-running-in-karaf" class="anchor" href="#todo-get-propertysetmanager-with-storage-running-in-karaf" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Get PropertysetManager with storage running in Karaf<a id="sec-3-16"></a>
</h2>

<h2>
<a id="todo-create-a-restful-api-and-a-storagepersist-mechanism-on-top-of-it" class="anchor" href="#todo-create-a-restful-api-and-a-storagepersist-mechanism-on-top-of-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Create a RESTful API and a storage/persist mechanism on top of it<a id="sec-3-17"></a>
</h2>

<h2>
<a id="todo-create-a-query-language-or-find-something-usable-and-implementuse" class="anchor" href="#todo-create-a-query-language-or-find-something-usable-and-implementuse" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Create a query language (or find something usable and implement/use)<a id="sec-3-18"></a>
</h2>

<ul>
<li>  Possibilities

<ul>
<li>  I like s-expressions</li>
<li>  Is there something in JSON that could be used</li>
<li>  Just implement something as nested complex objects and let its JSON representation be the wire format</li>
</ul>
</li>
</ul>

<h2>
<a id="todo-lag-en-s-expression-factory-for-jackson" class="anchor" href="#todo-lag-en-s-expression-factory-for-jackson" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO Lag en s-expression-factory for jackson<a id="sec-3-19"></a>
</h2>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/steinarb">steinarb</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
