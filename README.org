* Modelstore: a typless modeling framework
** What is this?

 This is a small Java library intended to hold a model consisting of objects and relations in memory.

 The main use case for this library is to be used as a generic model container for an Eclipse GEF editor.  Because of this, and because it does no harm, and because I kind of like OSGi, this library is packaged as an OSGi bundle.

 The API is meant to be as clutter-free as possbile in use: it should throw no exceptions, and it should return no nulls (instead of null it will return the empty string, empty collections and zero values for the numeric types).

 The PropertySet interface defines the API of objects that forms both objects and relationships of the model.

 This library is licensed under the Eclipse Public License.  See the
 file LICENSE for the terms and specifics of the license.
** Development stuff

 [[https://travis-ci.org/steinarb/modelstore][file:https://travis-ci.org/steinarb/modelstore.png]] [[https://coveralls.io/r/steinarb/modelstore][file:https://coveralls.io/repos/steinarb/modelstore/badge.svg]]

  - [[https://github.com/steinarb/modelstore][Source code repository]]
  - [[https://travis-ci.org/steinarb/modelstore][Continous integration build on Travis CI]]
  - [[https://coveralls.io/r/steinarb/modelstore][Test coverage history on coveralls]]
  - [[http://steinarb.github.io/modelstore/javadoc/][javadoc generated by the latest travis build]]

* Roadmap [13/37]
** DONE Fix the test coverage of all property values (hashCode, equals and toString ruined coverage)
** DONE Put javadoc from travis builds on the web
** TODO Add javadocs to everything
** DONE Rename "propertyvalue" to "value" in type names

Having "property" in the name doesn't make sense for the list of values, and make the type names longer than they have to be.
** DONE Refactor the propertyvalue creation into something that makes sense for a library bundle
 - Maybe a static method on the PropertyValue interface, if that's possible?
 - Or make that creation methods on the interface, backed by a class with static methods?
** DONE Create typespecific add and set operations to the ValueList interface
** DONE Create primitive-value setters for Propertyset
** DONE Change "propertyName" to "propertyname" in arguments
** TODO Introduce a DateTime primitive type in value
** DONE Add clone or copy constructor operation to Propertyset
** DONE Add clone or copy constructor to ValueList
** DONE Add copy-on-set for complex properties and list values
 - Primitives and lists are immutable and can be shared
 - Lists and complex properties should not be shared
   - For complex properties this can be accomplished with a clone operation
   - For list properties, probably a clone here as well
** DONE Add list creation method on the PropertysetManager interface, to make it possible to create ValueList instances outside of the bundle
** TODO Add propertyvalue creation methods on the PropertysetManager interface, to make them accessible to the world
** DONE Put some basic aspects in place (object, relationship, model, aspectcontainer)
** TODO Split off PropertysetContext [4/5]
 - PropertysetManager will be the access point for creating and saving ModelContext instances
 - This is an approach at making the system multithreaded and performant
   - Minimal locking on the propertysets themselves, because there is only on thread using them at a time
   - No need to copy the property values, because they are immutable (except for complexproperty and listproperty, that is...)
     - Use shallow copy on list and complex object property get, perhaps?
*** DONE Persist and instantiation should use PropertysetContext
*** DONE Extract an interface for PropertysetContext
*** DONE Add methods to the PropertysetManager to store and receive PropertysetContexts
*** DONE Store metadata (last modification time, at first)
*** TODO Create a merge operation that will merge all aspects and propertysets
** DONE Rename the PropertysetManager interface to Modelstore
** TODO Rename PropertysetContext to ModelContext
** TODO Wrap the propertysets and aspects returned from the metadata-setting PropertysetContext
** TODO Create a read-only propertyset wrapper with defensive copy-on-read for complex properties and lists
 - Use this with the built-in aspects
** TODO Create a proxy aspect
 - Contains a single property that is a reference to a different propertyset
 - Think about how a proxy should be handled in an aspect container
   - It would be nice if the actual application of the aspect could "pass through" to the proxied propertyset
   - The graphical information (position, symbol) should be added to the proxy
** TODO Order propertysets by dependency when serializing
 - Aspects should come before propertysets referencing them
 - Base aspects should come before aspects inheriting them
 - Propertysets being referenced should come before propertysets referencing them
   - Contents of a container should come before the container
   - Endpoints of a relationship should come before the
   - Propertyset fronted by graphical proxy propertyset should come before the proxies
** TODO Split propertysetcontext objects
 - Separate out a propertyset and all the propertysets it depends on to a separate PropertysetContext
** TODO Add verification code for aspects
 - Check a propertyset to see if it has the required propertysets for an aspect
 - Check the propertyset to see if it brings anything meaningful to the table (ie. property definitions)
** TODO Test serialization/deserialization using YAML (YAML has object id and object reference)
** TODO Add AspectViwer (connected to aspect container and used as a filter)
** TODO Storage based on SQL for relationships and references and individual JSON files
*** TODO Individual Propertyset files git versioned
*** TODO Metatada into the RDBMS
 - Per propertyset load time
 - Per propertyset last modified time
 - Propertyset delete time
** TODO Storage based on PostgreSQL with native JSON support
** TODO Connect a minimal hardcoded model to eclipse GEF
** TODO Implement JSON storage for eclipse GEF models
** TODO Get PropertysetManager with storage running in Karaf
** TODO Create a RESTful API and a storage/persist mechanism on top of it
** TODO Create a query language (or find something usable and implement/use)
 - Possibilities
   - I like s-expressions
   - Is there something in JSON that could be used
   - Just implement something as nested complex objects and let its JSON representation be the wire format
** TODO Make an s-expression-factory for jackson
Maybe actually two separate:
 - S-expression directly on jackson
 - sxml on top of the existing XML serialization/deserialization
** TODO Move PropertysetContext to a library bundle (or possibly one with a factory service for modelcontexts?)
- Alternatively:
  - Just move the interface definitions to a separate bundle
    - Does this have any benefits
** TODO Move Jackson serialization to a separate bundle (maybe a library bundle?)
** TODO Rename Propertyset to Valueset, PropertysetManager to ValuesetManager and PropertysetContext to ValueContext
 - Don't know if I will go through with this...?
